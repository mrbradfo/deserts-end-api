name: deserts-end-api Continuous Integration

on:
  push:
    branches: [CI-CD]
  pull_request:
    branches: [master]

jobs:
  run-github-action:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

  install-npm:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run shell command
        run: |
          echo "Hello Mom!"
      - name: npm version
        run: |
          npm --version
      - name: node version
        run: |
          node --version
      - name: npm install
        run: |
          npm install

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm run test
    needs: install-npm

  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm run build
    needs: test
