name: deserts-end-api Continuous Integration

on:
  push:
    branches: [CI-CD]
  pull_request:
    branches: [master]

jobs:
  install-npm:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run shell command
        run: |
          echo "Hello Mom!"
      - name: npm version
        run: |
          npm --version
      - name: node version
        run: |
          node --version
      - name: npm install
        run: |
          npm install

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm run test
    needs: install-npm

  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm run build
    needs: test

  run-github-action:
    runs-on: ubuntu-latest
    steps:
      - name: Simple JS action
        id: greet
        uses: actions/hello-world-javascript-action@v1.1
        with:
          who-to-greet: "Mona the Octocat"
      - name: Log Greeting Time
        run: echo "The time was ${{ steps.greet.outputs.time }}"
